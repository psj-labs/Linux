# NIC 추가 및 네트워크 설정 (Rocky Linux)

## 개요

- 본 문서는 VMware 환경에서 가상 머신에 NIC를 추가하고  
  Rocky Linux에서 해당 NIC에 IP 주소를 설정하는 과정을 정리한 학습 문서입니다.
- NetworkManager 기반의 설정 방식과  
  GUI(X Window) 및 TUI(nmtui)를 이용한 설정 방법을 각각 다룹니다.

---

## NIC 설정 방식 개요

- Rocky Linux에서는 NetworkManager를 통해 네트워크 설정을 관리합니다.
- NIC 설정 방식은 크게 다음 두 가지로 나뉩니다.
  - X Window(GUI)를 이용한 설정
  - nmtui(TUI)를 이용한 설정

---

## NetworkManager 서비스 확인

- 네트워크 설정 전 다음 명령어로 NetworkManager 서비스 상태를 반드시 확인합니다.
```text
systemctl is-active NetworkManager.service
```
- NetworkManager가 active 상태여야 정상적으로 동작합니다.
- 일부 버전에서는 NetworkManager가 활성화된 경우  
  직접적인 설정 파일 편집이나 ifconfig 명령어를 통한 변경이 제한될 수 있습니다.

---

## 설정 적용 방식

### 시스템 재시작에 의한 적용

- 설정 파일은 시스템 재시작 시 새로 적용됩니다.

### 명령어에 의한 적용

- `systemctl restart NetworkManager.service`
  - IP가 추가됨
  - 기존 IP를 보존하여 기존 접속 유지

- `nmcli conn up [NIC]`
- `nmcli dev disconnect [NIC] && nmcli dev connect [NIC]`
  - IP가 변경됨
  - 원격 접속 중일 경우 터미널 연결이 끊길 수 있음

---

## NIC 추가 (VMware 설정)

- 가상 머신이 종료된 상태에서 다음 순서로 NIC를 추가합니다.
  - `Edit Virtual Machine Settings` 선택
  - 오른쪽 하단 `Add` 클릭
  - `Network Adapter` 선택 후 `Finish` 클릭

![01](/Network%20Setting%20-%20Part%201/imgs/01.png)

- 설정 완료 후 VMware 화면에서  
  `Network Adapter 2`가 추가된 것을 확인할 수 있습니다.

![03](/Network%20Setting%20-%20Part%201/imgs/03.png)

---

## X Window(GUI)를 이용한 NIC 설정

### 네트워크 설정 화면 진입

- Rocky Linux 부팅 후  
  현재 활동 -> 프로그램 표시 -> 설정 -> 네트워크 메뉴로 이동합니다.

![04](/Network%20Setting%20-%20Part%201/imgs/04.png)

---

### NIC 확인

- Ethernet 항목에서 다음 두 인터페이스를 확인합니다.
  - 기존 인터페이스: `ens160`
  - 새로 추가된 인터페이스: `ens224`

- ens224 옆의 `+` 버튼을 클릭하여 설정을 진행합니다.

---

### NIC 신원 설정

- 신원 항목에서 다음 사항을 반드시 확인합니다.
  - 이름은 새로 추가된 인터페이스 이름인 `ens224`로 설정
  - MAC 주소는 `ens224`에 해당하는 항목을 선택

![05](/Network%20Setting%20-%20Part%201/imgs/05.png)

![06](/Network%20Setting%20-%20Part%201/imgs/06.png)

---

### IPv4 설정

- IPv4 항목에서 수동 설정을 선택합니다.
- IP 주소: `192.168.11.146`
- 넷마스크: `255.255.255.0`

![07](/Network%20Setting%20-%20Part%201/imgs/07.png)

- 설정 후 오른쪽 상단의 추가 버튼을 클릭합니다.

---

### 설정 완료 확인

- 두 개의 NIC가 활성화된 것을 확인합니다.

![08](/Network%20Setting%20-%20Part%201/imgs/08.png)

---

### IP 설정 확인

- IPv4 주소 확인

![09](/Network%20Setting%20-%20Part%201/imgs/09.png)

- 라우팅 테이블 확인

![10](/Network%20Setting%20-%20Part%201/imgs/10.png)

---

## nmtui를 이용한 NIC 설정

### 인터페이스 이름 확인

- NIC 추가 후 Rocky Linux를 실행합니다.
- 새로 생성된 인터페이스 이름을 확인합니다.

![11](/Network%20Setting%20-%20Part%201/imgs/11.png)

- 새 인터페이스는 `ens224`이며 아직 IP가 할당되지 않아 주소는 표시되지 않습니다.

---

### nmtui 실행

- 터미널에서 `nmtui` 실행 시 다음 화면이 출력됩니다.

![12](/Network%20Setting%20-%20Part%201/imgs/12.png)

---

### 연결 편집 진입

- 연결 편집 메뉴로 이동합니다.

![13](/Network%20Setting%20-%20Part%201/imgs/13.png)

---

### 새 연결 생성

- 추가 -> 이더넷 -> 생성 순서로 진행합니다.

![14](/Network%20Setting%20-%20Part%201/imgs/14.png)

---

### 프로파일 설정

- 프로파일 이름은 NIC 이름과 동일하게 `ens224`로 설정합니다.
- IPv4 설정에서 수동을 선택합니다.
- 넷마스크 주소는 CIDR 표기법으로 입력합니다.

![15](/Network%20Setting%20-%20Part%201/imgs/15.png)

---

### 설정 저장

- 확인 버튼을 눌러 설정을 완료합니다.
- 종료 -> 확인을 선택하여 설정을 저장합니다.

![16](/Network%20Setting%20-%20Part%201/imgs/16.png)

---

## 설정 결과 확인

- ens224 인터페이스 정보만 확인합니다.

![17](/Network%20Setting%20-%20Part%201/imgs/17.png)

- 설정한 IP 주소가 정상적으로 할당된 것을 확인할 수 있습니다.

---

## 인터페이스 활성화 / 비활성화

```text
ip link set [NIC] up / down
```
- 지정한 인터페이스를 활성화하거나 비활성화 합니다.
- 이를 통해서는 IP 설정을 변경할 수 없습니다.
  - 항구적인 설정 변경은 불가능 하지만, 임시 설정을 복원할 수는 있습니다.

## 정리

- 이처럼 VMware 환경에서 NIC를 추가한 뒤 Rocky Linux에서 GUI(X Window)와 nmtui를 이용해 NetworkManager 기반으로 네트워크 인터페이스를 설정하는 과정을 확인하였습니다.
- NIC 추가 후 인터페이스 이름을 정확히 확인하고 설정 적용 방식에 따라 접속 유지 여부가 달라질 수 있습니다.
