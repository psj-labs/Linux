# DNS 서버 프로그램 BIN

## 개요

- 본 문서는 Linux 환경에서
  가장 널리 사용되는 DNS 서버 소프트웨어인 BIND의 개념과
  기본 구성 요소 및 동작 과정을 정리한 학습 문서입니다.
- BIND와 named 데몬의 역할을 구분하여 이해하고
  관련 패키지 설치 및 설정 파일을 확인합니다.
- 또한 DNS 질의 과정을 실습을 통해 확인합니다.

---

## BIND 개요

- BIND는 리눅스 및 유닉스 환경에서
  가장 널리 사용되는 표준 DNS 서버 소프트웨어입니다.
- DNS 서버 프로그램의 이름은 BIND입니다.
- BIND가 실제로 실행되는 데몬(프로세스)의 이름은 named입니다.
- BIND의 역할은 도메인 이름과 IP 주소를 서로 변환하는
  DNS 서비스를 제공하는 것입니다.

---

## BIND 패키지 설치 확인

- 설치 가능한 BIND 관련 패키지를 확인합니다.
```text
dnf list bind bind-utils
```
- 필자는 이미 다음 명령어로 패키지를 설치하였습니다.
```text
dnf install -y bind bind-utils
```
- 설치가 완료되면 다음과 같이 설치된 패키지 목록이 출력됩니다.
![01](/DNS%20서버/imgs/01.png)

---

## named 그룹 확인

- BIND 패키지를 설치하면
  named 그룹이 자동으로 생성됩니다.
- 해당 그룹은 GID 25번으로 생성됩니다.
- 다음 명령어로 이를 확인합니다.
```text
cat /etc/group
```
![02](/DNS%20서버/imgs/02.png)

---

## named.conf 설정 파일 확인

- 다음은 BIND의 메인 설정 파일인
  `/etc/named.conf` 파일을 확인합니다.
```text
cat /etc/named.conf
```
![03](/DNS%20서버/imgs/03.png)

- `/etc/named.conf` 파일은
  named 데몬이 어떤 도메인 존을 어떤 파일로 서비스할지와
  DNS 서버의 전체 동작 방식을 정의하는 설정 파일입니다.
- 출력된 설정 내용은
  루트 도메인(.)에 대한 DNS 정보를
  named.ca 파일에서 힌트(참고용)로 로딩하여
  루트 네임서버 정보를 알게 하겠다는 의미입니다.

---

## named.ca 파일 확인

- 다음은 루트 네임서버 정보를 담고 있는
  `/var/named/named.ca` 파일을 확인합니다.
```text
cat /var/named/named.ca
```
![04](/DNS%20서버/imgs/04.png)

- `named.ca` 파일은
  DNS가 전 세계 DNS 탐색을 시작할 때
  가장 먼저 참조하는 루트 네임서버 목록 파일입니다.
- 해당 파일에는
  전 세계 루트 네임서버들의 IP 주소 정보가 포함되어 있으며
  DNS 질의가 시작될 때 첫 출발점으로 사용됩니다.

---

## named 데몬 제어

- named 데몬은 다음 명령어로 제어합니다.
```text
systemctl start named : named 시작
systemctl status named : named 상태 확인
systemctl stop named : named 종료
```
- 다음은 named 데몬을 실행한 후
  현재 active 상태인지 확인한 화면입니다.
![05](/DNS%20서버/imgs/05.png)

---

## DNS 질의 실습

- 다음 명령어로 DNS 질의를 수행합니다.
```text
nslookup www.google.com 192.168.10.146
```
![06](/DNS%20서버/imgs/06.png)
- 현재 192.168.11.146 환경이 Local DNS 서버입니다.

- 해당 명령은
  www.google.com의 IP 주소를
  192.168.10.146 DNS 서버에게 질의한 것입니다.
- 192.168.10.146 DNS 서버가
  DNS 계층 구조를 따라 IP 주소를 조회한 뒤
  클라이언트에게 응답합니다.

---

## DNS 질의 동작 과정

- DNS 질의는 다음과 같은 순서로 동작합니다.
```text
Client가 local DNS 서버에게 www.google.com의 IP를 질의합니다.
local DNS 서버가 root DNS 서버에게 질의합니다.
root DNS 서버가 com DNS 서버의 위치를 응답합니다.
local DNS 서버가 com DNS 서버에게 질의합니다.
com DNS 서버가 google.com 권한 DNS 서버의 위치를 응답합니다.
local DNS 서버가 google.com 권한 DNS 서버에게 질의합니다.
google.com 권한 DNS 서버가 www.google.com의 IP를 응답합니다.
local DNS 서버가 Client에게 최종 IP 주소를 응답합니다.
```
---

## 정리

- BIND는 DNS 서버 소프트웨어의 이름입니다.
- named는 BIND가 실제로 동작하는 데몬입니다.
- named.conf는 DNS 서버의 동작을 정의하는 메인 설정 파일입니다.
- named.ca는 전 세계 루트 네임서버 정보를 담고 있는 기준 파일입니다.
- DNS는 계층 구조를 따라 재귀 질의를 수행하여 IP 주소를 해석합니다.
